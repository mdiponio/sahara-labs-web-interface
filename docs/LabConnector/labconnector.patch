Index: application/Bootstrap.php
===================================================================
36a37,40
>  *
>  * @author Herbert Yeung
>  * @date 13th July 2010
>  * Modification: Added the namespace for LabConnector.
79a84
>         $autoloader->registerNamespace('Labconnector_');
111d115
< 
Index: application/controllers/LabconnectorController.php
===================================================================
97c97
<             if($p->resourceClass == 'TYPE' && $p->resource->resourceName == 'ILABS')
---
>             if ($p->resourceClass == 'TYPE' && $p->resource->resourceName == 'ILABS')
112c112
<   		           	if ($p->displayName == $resourceClass["display"])
---
>   		           	if ($p->displayName == $resourceClass["display"] || $p->resourceName == $resourceClass["display"])
116c116
<                 if(!$nonUnique)
---
>                 if (!$nonUnique)
129c129
<         if(!$resourceClasses)
---
>         if (!$resourceClasses)
137,151d136
<         
<      	/* Load the labconnector for the user. */
< 		//$this->_redirectTo('index', 'labconnector'); //Get the User choice of Experiment first
<         //$clientLabConnector = Sahara_Soap::getSchedServerLabConnectorClient();
<         //$exptID = $clientLabConnector->submitExperiment(array('userQName' => $this->_auth->getIdentity()));
<     }	
<     
<     /**
<      * Action to show any errors encountered e.g. Permissions denied for Rig/Lab type
<      */
<     public function errorAction()
<     {
<     	$this->view->headTitle('LabShare - iLabs Experiments');
<         $this->view->messages = $this->_flashMessenger->addMessage($this->errMsg);    	
<         //$this->_flashMessenger->addMessage($this->errMsg);   	
183c168
< 	    if(isset($form))
---
> 	    if (isset($form))
196d180
<         //$params = $this->_request->getPost();
203c187,188
<      	if($params['exptname'] == "Time Of Day - Batch")
---
>      	/* This is unique to the experiments offered & will need to be updated upon each experiment, respectively */
>      	if ($params['exptname'] == "Time Of Day - Batch")
208c193
<      	else if($params['exptname'] == "UQ Radioactivity Expt1") 
---
>      	else if ($params['exptname'] == "UQ Radioactivity Expt1") 
218,219d202
< 	//var_dump($exptSpecsXMLObj->asXML());
< 	
239d221
<             	//echo var_dump($ex);
291,292c273
<     	$userdirectoryID = $this->_request->getParam('userdirectoryID', '0');
<     	$userPath = str_replace(":", "_", $userdirectoryID); //Namespace contains colons which is replaced
---
>     	$userPath = str_replace(":", "_",  $this->_auth->getIdentity()); //Namespace contains colons which is replaced
297,300c278,279
< 	    if($experimentStorage)
<     		echo $fileStoragePath . ":<br><br>" . $experimentStorage;
<     	else
<     		$this->_redirectTo('labconnector', 'error');
---
> 	    if ($experimentStorage)
>     		echo $fileStoragePath . ":<br /><br />" . $experimentStorage;
Index: application/controllers/QueueController.php
===================================================================
36a37,42
>  * 
>  * @author Herbert Yeung
>  * @date 17th June 2010
>  * Modification: Added extra check for RIG Permission TYPE as 'ILABS'. If so, don't add it.
>  * Another solution is to add conditional above 'if (!array_key_exists($p->userClass->userClassName, $userClasses))'
>  * but this would have impacted if a user group was associated with multiple permissions. 
87a94,96
>             /* Extra check for iLabs experment of rig type ILABS. */
>             if($p->resource->resourceName != 'ILABS')
>             {
103a113
>         }
Index: application/configs/config.ini
===================================================================
12c12
< logger.filename = /home/mdiponio/workspace/WI/webinterface.log
---
> logger.filename = /var/www/sahara/public/webinterface.log
38c38
< 
---
> camera.rcjpeg = /primitive/file/pc/FileTransferController/pa/binaryFile/tf/base64/filename/<FILE>
40a41
> cameradesc.rcjpeg = Rig Client Cam
70,75c71,72
< ; Database configuration
< database.adapter = Pdo_Mysql
< database.params.host = 127.0.0.1
< database.params.dbname = sahara
< database.params.username = sahara
< database.params.password = saharapasswd
---
> ; LabConnector Experiment Storage root directory
> experiment.storage.dir = /home/saharausrs
Index: application/views/layouts/_navbar.phtml
===================================================================
36a37,41
>  * 
>  * @author Herbert Yeung
>  * @date  17th June 2010
>  * Modification: Added a menu item for Sahara User titled 'LabConnector' which maps
>  * to LabConnectorController->indexAction()
43c48,49
<             'Rig Selection' => array('controller' => 'queue', 'action' => 'index')
---
>             'Rig Selection' => array('controller' => 'queue', 'action' => 'index'),
>         	'LabConnector'  => array('controller' => 'labconnector', 'action' => 'index') //Adding LabConnectorController mapped to indexAction()
Index: application/views/scripts/labconnector/index.phtml
===================================================================
Index: library/Sahara/Acl.php
===================================================================
36a37,40
>  * 
>  * @author Herbert Yeung
>  * @date  17th June 2010
>  * Modification: Added permission so that a user can access the LabConnector and index pages
72c76,77
<                                   'primitive' => array('json', 'echo', 'file')
---
>                                   'primitive' => array('json', 'echo', 'file'),
>     							  'labconnector' => array('index', 'error', 'experiment', 'results', 'refreshresults', 'submitexperiment')
Index: library/Sahara/Soap.php
===================================================================
36a37,40
>  * 
>  * @author Herbert Yeung
>  * @date  25th May 2010
>  * Modification: Added SOAP interface to access SchedServer-LabConnector bundle
52a57,59
>     /** The bundle containing the LabConnector SOAP interface in the Scheduling Server. */
>     const LABCONNECTOR_SERVICE_BUNDLE = 'SchedulingServer-LabConnector';
>     
180a188,205
>      * Gets a Sahara_Soap instance which points to the LabConnector interface
>      * of the Scheduling Server.
>      *
>      * @return Sahara_Soap instance
>      * @throws Exception if failed contacting Scheduling Server
>      */
>     public static function getSchedServerLabConnectorClient()
>     {
>         if (!Zend_Registry::isRegistered(self::LABCONNECTOR_SERVICE_BUNDLE))
>         {
>             Zend_Registry::set(self::LABCONNECTOR_SERVICE_BUNDLE,
>                     self::createSchedServerClient('LabConnector', self::LABCONNECTOR_SERVICE_BUNDLE));
>         }
>         return Zend_Registry::get(self::LABCONNECTOR_SERVICE_BUNDLE);
>     }
> 
> 
>     /**
Index: docs/LabConnector/labconnector.patch
===================================================================
173c173
< Index: public/js/elements/cameras/cameras.js
---
> Index: docs/LabConnector/labconnector.patch
175,176d174
< 59a60
< > 	case 'rcjpeg':
Index: docs/LabConnector/labconnector.patch
===================================================================
